import{a as n,r as l,h as w,j as e,P as B,l as N,n as F,C as O}from"./index-D9Xxbm4X.js";import{u as U,C as k,a as D,c as u,d as q,e as _,f as a,g as I}from"./CrudInput-nugYlvBy.js";import{B as R}from"./Button-BS3uwBQQ.js";import{g as L}from"./suppliers-ApBZBYU9.js";import"./Search-6GARPoev.js";const o="productBuys";function M(r){return r.map(({...s})=>({...s}))}async function V(){const r=await n({resource:o+"?includeSuplier=true"});return M(r)}async function $({data:r}){return await n({resource:o,data:r,method:"POST",all:!0})}async function A({id:r,data:s}){return await n({resource:o+"/"+r,data:s,method:"PUT",all:!0})}async function G({id:r}){return await n({resource:o+"/"+r,method:"DELETE",all:!0})}function W(){const{entityName:r,pluralEntityName:s,head:c,table:p,form:m,confirm:x,progress:h,datalist:f,$form:j,handleModeNew:y,handleModeDelete:C,hanleCancel:d,handleSubmit:P,handleDelete:v,handleSearch:S}=U({entityName:"Venta",pluralEntityName:"Ventas",searchFields:["name","description"],crudGet:V,crudStorage:$,crudUpdate:A,crudDestroy:G}),[b,g]=l.useState([]),[T,E]=l.useState([]);return l.useEffect(()=>{L().then(t=>g(t)),w().then(t=>E(t))},[]),e.jsxs(B,{className:"flex flex-col gap-7 w-full p-3",children:[e.jsx(k,{title:s,icon:N,isOpen:c,onClickNew:y,handleSearch:S}),e.jsx(D,{titles:["Fecha","Proveedor","Total"],dataList:f,isOpen:p,onRowPrint:t=>{var i;return e.jsxs("tr",{children:[e.jsx(u,{value:t.date_str}),e.jsx(u,{value:(i=t==null?void 0:t.suplier)==null?void 0:i.name}),e.jsx(u,{value:"$"+t.total}),e.jsx(q,{children:e.jsx(R,{icon:F,type:"delete",onClick:()=>C(t),classIcon:"text-[--c3-txt2]"})})]},t.id)}}),e.jsxs(_,{title:r,isOpen:m,onClickCancel:d,onSubmit:P,formRef:j,children:[e.jsx(a,{label:"Fecha de venta",type:"date",name:"date_buy",required:!0}),e.jsx(a,{label:"Iva",placeholder:"Escriba el iva  ",name:"tax",required:!0}),e.jsxs(a,{label:"Proveedor",name:"suplier_id",type:"select",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un proveedor"}),b.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs(a,{label:"Usuario",name:"user_id",type:"select",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un usuario"}),T.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx(I,{isOpen:x,text:"Â¿Seguro de eliminar esta venta?",onClickDelete:v,onClickCancel:d}),e.jsx(O,{isOpen:h,text:"Procesando tu solicitud..."})]})}export{W as default};
